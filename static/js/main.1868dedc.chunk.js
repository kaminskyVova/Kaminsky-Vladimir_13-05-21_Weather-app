(this.webpackJsonpweather_app=this.webpackJsonpweather_app||[]).push([[0],{47:function(e,t,a){e.exports=a(59)},55:function(e,t,a){},57:function(e,t,a){},58:function(e,t,a){},59:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(7),i=a.n(c),o=a(29),s=a(16);a(55);function u(e){var t=e.onSelect,a=e.favorites;return r.a.createElement("div",{className:"d-flex justify-content-center flex-wrap"},a.map((function(e){var a=e.name,n=e.current,c=e.id;return r.a.createElement("div",{key:c,className:"border border-primary text-center p-3 m-1 border-added",onClick:function(){return t(a)}},a,r.a.createElement("br",null),n.temperature," C")})))}var l=a(10),d=a.n(l),m=a(12);a(57);var f=a(91),p=a(92),v=a(41),b=a(34),y=a(39),h=a(40),E=new(function(){function e(){var t,a,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(y.a)(this,e),this.security=null!==(t=null===r||void 0===r?void 0:r.security)&&void 0!==t&&t,this.host=r.host,this.port=null!==(a=null===r||void 0===r?void 0:r.port)&&void 0!==a?a:this.security?"443":"8080",this.query=null!==(n=null===r||void 0===r?void 0:r.query)&&void 0!==n?n:{}}return Object(h.a)(e,[{key:"getAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="";return(t=Object.entries(Object.assign({},this.query,t))).length&&(a="?"+t.map((function(e){return e.join("=")})).join("&")),"".concat(this.security?"https":"http","://").concat(this.host,":").concat(this.port).concat(e).concat(a)}},{key:"get",value:function(){var e=Object(m.a)(d.a.mark((function e(t,a){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.getAddress(t,a),e.next=3,fetch(n,{method:"GET"});case 3:return r=e.sent,e.next=6,r.json();case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"set",value:function(){var e=Object(m.a)(d.a.mark((function e(t){var a,n,r,c,i=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>1&&void 0!==i[1]?i[1]:{},n=i.length>2?i[2]:void 0,r=this.getAddress(t,n),e.next=5,fetch(r,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(a)});case 5:return c=e.sent,e.next=8,c.json();case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}())({security:!0,host:"dataservice.accuweather.com",query:{apikey:"hVB0C5uqo6c8JgTm7dHmqR2VbJrvQ5ce"}}),g=Object(b.b)({name:"weather",initialState:{loading:!1,favoriteCities:[],autoComplete:[],forecasts:[],current:{},cityKey:null},reducers:{setLoading:function(e,t){e.loading=t.payload},addCityKey:function(e,t){t.payload&&(e.cityKey=t.payload,e.autoComplete=[])},setCurrent:function(e,t){e.current=t.payload},setForecasts:function(e,t){t.payload&&(e.forecasts=t.payload)},setAutoComplete:function(e,t){t.payload&&(e.autoComplete=t.payload)},addToFavorites:function(e,t){e.favoriteCities=[].concat(Object(v.a)(e.favoriteCities),[t.payload])},removeFavorites:function(e,t){e.favoriteCities=e.favoriteCities.filter((function(e){return e.id!==t.payload}))}}}),x=function(){return Object(s.c)((function(e){return e.weather}))},j=g.actions,k=j.setLoading,N=j.addCityKey,w=j.setCurrent,C=j.setForecasts,O=j.setAutoComplete,F=j.addToFavorites,T=j.removeFavorites,A=function(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return a(k(!0)),t.next=5,E.get("/locations/v1/cities/search",{q:e});case 5:n=t.sent,a(k(!1)),n&&n.length&&a(N(n[0].Key));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return a(k(!0)),t.next=5,E.get("/currentconditions/v1/".concat(e),{details:!0});case 5:n=t.sent,a(k(!1)),n&&n.length&&a(w({temperature:n[0].Temperature.Metric.Value,wind:n[0].Wind.Speed.Metric.Value,humidity:n[0].RelativeHumidity,clouds:n[0].CloudCover}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},q=function(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return");case 2:return a(k(!0)),t.next=5,E.get("/forecasts/v1/daily/5day/".concat(e),{metric:!0});case 5:n=t.sent,a(k(!1)),n&&n.DailyForecasts&&(r=n.DailyForecasts.map((function(e){return{date:e.Date,min:e.Temperature.Minimum.Value,max:e.Temperature.Maximum.Value}})),a(C(r)));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},D=g.reducer;function K(e){var t=e.defaultCity,a=void 0===t?"Tel Aviv":t,c=e.favorites,i=void 0===c?[]:c,u=e.addFavorite,l=e.removeFavorite,v=Object(n.useState)(a),b=Object(o.a)(v,2),y=b[0],h=b[1],g=Object(s.b)(),j=x(),N=j.autoComplete,w=j.forecasts,C=j.current,F=j.cityKey,T=j.loading,D=N,K=F,V=y,J=C.wind,z=C.humidity,H=C.clouds,L=Object(n.useMemo)((function(){return T?"loading":F?"show":"error"}),[T,F]);Object(n.useEffect)((function(){g(S(F)),g(q(F))}),[S,q,F]);var W,R=function(){var e=Object(m.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y){e.next=2;break}return e.abrupt("return");case 2:g(A(y));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();W=R,Object(n.useEffect)((function(){W()}),[]);var B=null;if("loading"===L)B=r.a.createElement("div",{className:"d-flex justify-content-center m-5"},r.a.createElement("div",{className:"spinner-border",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")));else if("error"===L)B=r.a.createElement("div",{className:"m-3"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("p",{className:"text-danger"},"City not found. Try again.")),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("img",{width:"50",src:"https://image.flaticon.com/icons/svg/3084/3084540.svg"})));else if("show"===L){var _=null;_=i.some((function(e){return e.id===K}))?r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return l(K)}},"Remove from Favorites")):r.a.createElement("div",null,r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return u({id:K,name:V,current:C})}},"Add to Favorites")),B=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-around"},r.a.createElement("div",{className:"to-day"},V,i.some((function(e){return e.id===K}))?r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),"(Added)"):"",r.a.createElement("br",null),C.temperature," C"),_),r.a.createElement("div",{className:"d-flex justify-content-center flex-column mx-auto content"},r.a.createElement("div",null,"To day:"),r.a.createElement("span",null,"Wind: ",J," km/h"),r.a.createElement("span",null,"Humidity: ",z," "),r.a.createElement("span",null,"Clouds: ",H)),r.a.createElement("div",{className:"d-flex align-items-center justify-content-center flex-wrap"},w.map((function(e,t){return r.a.createElement(M,Object.assign({key:t},e))}))))}var G=null;return D&&D.length&&(G=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"dropdown-menu display",style:{display:"block"}},D.map((function(e,t){return r.a.createElement("a",{key:t,className:"dropdown-item",onClick:function(t){t.preventDefault(),h(e),R()}},e)}))))),r.a.createElement("div",{className:"d-flex flex-column"},r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement("div",{className:"col-auto"},r.a.createElement("div",{className:"input-group"},r.a.createElement(f.a,{label:"Enter city",variant:"outlined",className:"search-input",type:"text",value:y,onChange:function(e){h(e.target.value.replace(/[^A-Za-z/ /[/-/]]/gi,""))},disabled:"loading"===L}),r.a.createElement("div",{className:"buttons"},r.a.createElement("div",{className:"input-group-append"},r.a.createElement(p.a,{color:"primary",variant:"contained",size:"large",className:"btn btn-primary",onClick:R,disabled:"loading"===L},"Search")),r.a.createElement("div",{className:"input-group-append"},r.a.createElement(p.a,{color:"primary",variant:"contained",size:"large",className:"btn btn-primary",onClick:function(){return g(function(e){return function(){var t=Object(m.a)(d.a.mark((function t(a){var n,r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}return t.abrupt("return",a(O([])));case 2:return a(k(!0)),t.next=5,E.get("/locations/v1/cities/autocomplete",{q:e});case 5:if(n=t.sent,a(k(!1)),n&&n.length){t.next=9;break}return t.abrupt("return",a(O([])));case 9:r=n.map((function(e){return e.LocalizedName})),a(O(r));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(y))},disabled:"loading"===L},"Autocomplite")))),G)),B)}function M(e){var t=e.date,a=e.min,n=e.max,c="";switch((t=new Date(t)).getDay()){case 0:c="Sun";break;case 1:c="Mon";break;case 2:c="Tue";break;case 3:c="Wed";break;case 4:c="Thu";break;case 5:c="Fri";break;case 6:c="Sat"}return r.a.createElement("div",{className:"border border-primary text-center p-3 m-1"},c,r.a.createElement("br",null),a," - ",n,"C")}a(58);var V=function(){var e=x(),t=Object(s.b)(),a=e.favoriteCities,c=Object(n.useState)(!0),i=Object(o.a)(c,2),l=i[0],d=i[1],m=Object(n.useState)("TelAviv"),f=Object(o.a)(m,2),p=f[0],v=f[1],b=null;return b=l?r.a.createElement(K,{defaultCity:p,favorites:a,addFavorite:function(e){t(F(e))},removeFavorite:function(e){t(T(e))}}):r.a.createElement(u,{favorites:a,onSelect:function(e){v(e),d(!0)}}),r.a.createElement("div",{className:"container vh-100 d-flex flex-column justify-content-center"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-header d-flex justify-content-between"},r.a.createElement("div",{className:"header-logo"},"Weather App"),r.a.createElement("div",{className:"header-btns"},r.a.createElement("button",{className:"btn btn-primary mr-2",onClick:function(){return d(!0)}},"Home"),r.a.createElement("button",{className:"btn btn-primary",onClick:function(){return d(!1)},disabled:0===a.length},"Favorites"))),r.a.createElement("div",{className:"card-body"},b)))},J=Object(b.a)({reducer:{weather:D}});i.a.render(r.a.createElement(s.a,{store:J},r.a.createElement(V,null)),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.1868dedc.chunk.js.map